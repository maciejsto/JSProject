{"filter":false,"title":"astronautsController.js","tooltip":"/src/backend/controllers/astronautsController.js","undoManager":{"mark":67,"position":67,"stack":[[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":0,"column":0},"end":{"row":1,"column":0}},"text":"\n"},{"action":"insertLines","range":{"start":{"row":1,"column":0},"end":{"row":61,"column":0}},"lines":["","","var Astronaut = require('../../backend/service/astronauts');","","","module.exports = function(){","","    var that = this;","    that.debug = false;","    that.name = 'astronautsController';","","    return {","","        setDebug: function(flag){","            that.debug = flag;","        },","","        getName: function(){","            return that.name;","        },","","        run: function(app){","","            if(that.debug)","                console.log('debug: inside astronaut run function ');","","            app.route('/users')","","                //use mongoose to get all astronauts from database","                .get(function(req, res){","                    Astronaut.find(function(err, astronauts){","                        if(err)","                            res.send(err)","                        res.json(astronauts);   // return all astronauts in json format","                    });","                })","","                //create astronat and send back all astronauts from database","                .post(function(req, res){","                    Astronaut.create({","                        name: \"first astronaut\"","                    }, function(err, astronaut){","                        if(err)","                            res.send(err);","","                        Astronaut.find(function(err, astronauts){","                            if(err)","                                res.send(err)","                            res.json(astronauts);","                        });","                    });","                });","            app.routes('users/:user_id')","                .delete(function(req, res){","","                });","            return this;","        }//end of run function","    };",""]},{"action":"insertText","range":{"start":{"row":61,"column":0},"end":{"row":61,"column":2}},"text":"};"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":53,"column":21},"end":{"row":53,"column":22}},"text":"s"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":55,"column":0},"end":{"row":55,"column":4}},"text":"    "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":55,"column":4},"end":{"row":55,"column":8}},"text":"    "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":55,"column":8},"end":{"row":55,"column":12}},"text":"    "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":55,"column":12},"end":{"row":55,"column":16}},"text":"    "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":55,"column":16},"end":{"row":55,"column":20}},"text":"    "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":55,"column":20},"end":{"row":55,"column":21}},"text":"/"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":55,"column":21},"end":{"row":55,"column":22}},"text":"/"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":55,"column":22},"end":{"row":55,"column":23}},"text":"T"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":55,"column":23},"end":{"row":55,"column":24}},"text":"O"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":55,"column":24},"end":{"row":55,"column":25}},"text":"O"},{"action":"insertText","range":{"start":{"row":55,"column":25},"end":{"row":55,"column":26}},"text":"D"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":27,"column":0},"end":{"row":27,"column":124}},"text":"            //list all astrnonats in databse--------------------------------------------------------------------------------"},{"action":"insertText","range":{"start":{"row":27,"column":124},"end":{"row":28,"column":0}},"text":"\n"},{"action":"removeLines","range":{"start":{"row":29,"column":0},"end":{"row":30,"column":0}},"nl":"\n","lines":[""]},{"action":"insertText","range":{"start":{"row":31,"column":0},"end":{"row":32,"column":0}},"text":"\n"},{"action":"insertLines","range":{"start":{"row":32,"column":0},"end":{"row":33,"column":0}},"lines":[""]},{"action":"insertText","range":{"start":{"row":35,"column":41},"end":{"row":36,"column":0}},"text":"\n"},{"action":"insertLines","range":{"start":{"row":36,"column":0},"end":{"row":37,"column":0}},"lines":[""]},{"action":"insertText","range":{"start":{"row":37,"column":0},"end":{"row":37,"column":56}},"text":"                        console.log('found astronauts');"},{"action":"removeText","range":{"start":{"row":38,"column":28},"end":{"row":38,"column":32}},"text":"json"},{"action":"insertText","range":{"start":{"row":38,"column":28},"end":{"row":38,"column":47}},"text":"send(JSON.stringify"},{"action":"insertText","range":{"start":{"row":38,"column":59},"end":{"row":38,"column":60}},"text":")"},{"action":"removeText","range":{"start":{"row":42,"column":12},"end":{"row":42,"column":16}},"text":"    "},{"action":"removeText","range":{"start":{"row":43,"column":0},"end":{"row":43,"column":41}},"text":"                .post(function(req, res){"},{"action":"removeText","range":{"start":{"row":42,"column":72},"end":{"row":43,"column":0}},"text":"\n"},{"action":"insertText","range":{"start":{"row":42,"column":72},"end":{"row":42,"column":121}},"text":"-------------------------------------------------"},{"action":"insertText","range":{"start":{"row":42,"column":121},"end":{"row":43,"column":0}},"text":"\n"},{"action":"insertLines","range":{"start":{"row":43,"column":0},"end":{"row":47,"column":0}},"lines":["            //app.route('/users')","                .post(function(req, res){","                    var randLetter = String.fromCharCode(65 + Math.floor(Math.random() * 26));","                    var uniqid = randLetter + Date.now();"]},{"action":"insertText","range":{"start":{"row":49,"column":0},"end":{"row":50,"column":0}},"text":"\n"},{"action":"insertText","range":{"start":{"row":50,"column":24},"end":{"row":50,"column":25}},"text":"\""},{"action":"insertText","range":{"start":{"row":50,"column":29},"end":{"row":50,"column":30}},"text":"\""},{"action":"removeText","range":{"start":{"row":50,"column":33},"end":{"row":50,"column":49}},"text":"first astronaut\""},{"action":"insertText","range":{"start":{"row":50,"column":33},"end":{"row":50,"column":41}},"text":"John D\","},{"action":"insertText","range":{"start":{"row":50,"column":41},"end":{"row":51,"column":0}},"text":"\n"},{"action":"insertLines","range":{"start":{"row":51,"column":0},"end":{"row":65,"column":0}},"lines":["                        \"walkedOnMoon\": true,","                        \"_id\": uniqid,","                        \"__v\": 1,","                        \"lastupdated\": new Date(),","                        \"skills\": [","                            \"floatings\",","                            \"repairings satellites\"","                        ],","                        \"missions\": ['1']","","                    }, function(err, astronauts){","                        if(err)","                            //console.log(err)","                            res.send(err)"]},{"action":"insertText","range":{"start":{"row":65,"column":0},"end":{"row":65,"column":57}},"text":"                        console.log(\"created astronaut\");"},{"action":"removeText","range":{"start":{"row":66,"column":20},"end":{"row":66,"column":23}},"text":"}, "},{"action":"insertText","range":{"start":{"row":66,"column":20},"end":{"row":66,"column":39}},"text":"    Astronaut.find("},{"action":"insertText","range":{"start":{"row":66,"column":62},"end":{"row":66,"column":63}},"text":"s"},{"action":"insertText","range":{"start":{"row":67,"column":24},"end":{"row":67,"column":26}},"text":"  "},{"action":"insertText","range":{"start":{"row":67,"column":26},"end":{"row":67,"column":28}},"text":"  "},{"action":"insertText","range":{"start":{"row":68,"column":28},"end":{"row":68,"column":32}},"text":"    "},{"action":"insertText","range":{"start":{"row":68,"column":32},"end":{"row":68,"column":34}},"text":"//"},{"action":"removeText","range":{"start":{"row":68,"column":47},"end":{"row":68,"column":48}},"text":";"},{"action":"insertText","range":{"start":{"row":69,"column":0},"end":{"row":69,"column":65}},"text":"                            console.log('created new astronaut');"},{"action":"insertText","range":{"start":{"row":69,"column":65},"end":{"row":70,"column":0}},"text":"\n"},{"action":"insertLines","range":{"start":{"row":70,"column":0},"end":{"row":78,"column":0}},"lines":["                            res.send(JSON.stringify(astronauts));","                        });","                    });","                })","                .delete(function(req, res) {","                    Astronaut.collection.remove(function (err) {","                        if (err)","                            res.send(err)"]},{"action":"insertText","range":{"start":{"row":78,"column":0},"end":{"row":78,"column":69}},"text":"                        console.log('deleting astronaut collection');"},{"action":"removeText","range":{"start":{"row":80,"column":27},"end":{"row":80,"column":28}},"text":" "},{"action":"removeText","range":{"start":{"row":81,"column":0},"end":{"row":81,"column":1}},"text":" "},{"action":"insertText","range":{"start":{"row":81,"column":44},"end":{"row":82,"column":0}},"text":"\n"},{"action":"insertLines","range":{"start":{"row":82,"column":0},"end":{"row":83,"column":0}},"lines":[""]},{"action":"insertText","range":{"start":{"row":83,"column":0},"end":{"row":83,"column":62}},"text":"                            console.log(\"deleted astronauts\");"},{"action":"removeText","range":{"start":{"row":84,"column":32},"end":{"row":84,"column":36}},"text":"json"},{"action":"insertText","range":{"start":{"row":84,"column":32},"end":{"row":84,"column":51}},"text":"send(JSON.stringify"},{"action":"insertText","range":{"start":{"row":84,"column":63},"end":{"row":84,"column":64}},"text":")"},{"action":"insertText","range":{"start":{"row":87,"column":0},"end":{"row":88,"column":0}},"text":"\n"},{"action":"insertText","range":{"start":{"row":89,"column":0},"end":{"row":89,"column":12}},"text":"<<<<<<< HEAD"},{"action":"insertText","range":{"start":{"row":89,"column":12},"end":{"row":90,"column":0}},"text":"\n"},{"action":"removeText","range":{"start":{"row":93,"column":0},"end":{"row":93,"column":19}},"text":"                });"},{"action":"insertText","range":{"start":{"row":93,"column":0},"end":{"row":93,"column":7}},"text":"======="},{"action":"insertText","range":{"start":{"row":93,"column":7},"end":{"row":94,"column":0}},"text":"\n"},{"action":"insertLines","range":{"start":{"row":94,"column":0},"end":{"row":120,"column":0}},"lines":["            //delete astronaut from database-------------------------------------------------------------------------------","            app.route('users/:_id')","                .delete(function(req, res){","                    //todo","                    Astronaut.remove({","                        _id : req.params._id","                    }, function(err, astronaut){","                        if(err)","                            res.semd(err);","                        Astronaut.find(function(err,astronauts){","                            if(err)","                                res.send(err)","                            console.log('deleted astronaut');","                            res.send(JSON.stringify(astronauts));","                        });","                    });","                });","","            //application-------------------------------------------------------------------------------------------------","            app.route('*')","                .get(function(req,res){","                    //res.sendfile();","                    //todo",">>>>>>> 6bc27411231dc57b33cc0338775c929d2e5e8770","                });",""]}]}],[{"group":"doc","deltas":[{"action":"removeLines","range":{"start":{"row":89,"column":0},"end":{"row":90,"column":0}},"nl":"\n","lines":["<<<<<<< HEAD"]}]}],[{"group":"doc","deltas":[{"action":"removeLines","range":{"start":{"row":89,"column":0},"end":{"row":90,"column":0}},"nl":"\n","lines":["            app.route('users/:user_id')"]}]}],[{"group":"doc","deltas":[{"action":"removeLines","range":{"start":{"row":89,"column":0},"end":{"row":90,"column":0}},"nl":"\n","lines":["                .delete(function(req, res){"]}]}],[{"group":"doc","deltas":[{"action":"removeLines","range":{"start":{"row":89,"column":0},"end":{"row":90,"column":0}},"nl":"\n","lines":["                    //TOOD"]}]}],[{"group":"doc","deltas":[{"action":"removeLines","range":{"start":{"row":89,"column":0},"end":{"row":90,"column":0}},"nl":"\n","lines":["======="]}]}],[{"group":"doc","deltas":[{"action":"removeLines","range":{"start":{"row":112,"column":0},"end":{"row":113,"column":0}},"nl":"\n","lines":[">>>>>>> 6bc27411231dc57b33cc0338775c929d2e5e8770"]}]}],[{"group":"doc","deltas":[{"action":"removeLines","range":{"start":{"row":113,"column":0},"end":{"row":114,"column":0}},"nl":"\n","lines":[""]}]}],[{"group":"doc","deltas":[{"action":"removeLines","range":{"start":{"row":113,"column":0},"end":{"row":114,"column":0}},"nl":"\n","lines":[""]}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":90,"column":30},"end":{"row":90,"column":31}},"text":"_"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":94,"column":41},"end":{"row":94,"column":42}},"text":"_"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":28,"column":31},"end":{"row":29,"column":0}},"text":"\n"},{"action":"insertText","range":{"start":{"row":29,"column":0},"end":{"row":29,"column":12}},"text":"            "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":29,"column":12},"end":{"row":30,"column":0}},"text":"\n"},{"action":"insertText","range":{"start":{"row":30,"column":0},"end":{"row":30,"column":12}},"text":"            "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":12},"end":{"row":30,"column":16}},"text":"    "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":16},"end":{"row":30,"column":17}},"text":"i"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":17},"end":{"row":30,"column":18}},"text":"f"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":18},"end":{"row":30,"column":20}},"text":"()"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":19},"end":{"row":30,"column":20}},"text":"r"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":20},"end":{"row":30,"column":21}},"text":"e"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":21},"end":{"row":30,"column":22}},"text":"q"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":22},"end":{"row":30,"column":23}},"text":"."}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":23},"end":{"row":30,"column":24}},"text":"p"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":24},"end":{"row":30,"column":25}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":25},"end":{"row":30,"column":26}},"text":"r"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":26},"end":{"row":30,"column":27}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":27},"end":{"row":30,"column":28}},"text":"m"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":28},"end":{"row":30,"column":29}},"text":"s"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":29},"end":{"row":30,"column":30}},"text":"."}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":30},"end":{"row":30,"column":31}},"text":"i"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":31},"end":{"row":30,"column":32}},"text":"d"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":32},"end":{"row":30,"column":33}},"text":" "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":33},"end":{"row":30,"column":34}},"text":"="}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":34},"end":{"row":30,"column":35}},"text":"="}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":35},"end":{"row":30,"column":36}},"text":" "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":36},"end":{"row":30,"column":37}},"text":"n"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":37},"end":{"row":30,"column":38}},"text":"u"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":38},"end":{"row":30,"column":39}},"text":"l"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":39},"end":{"row":30,"column":40}},"text":"l"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":41},"end":{"row":30,"column":42}},"text":"{"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":42},"end":{"row":30,"column":43}},"text":"}"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":42},"end":{"row":30,"column":43}},"text":"n"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":43},"end":{"row":30,"column":44}},"text":"e"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":44},"end":{"row":30,"column":45}},"text":"x"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":45},"end":{"row":30,"column":46}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":46},"end":{"row":30,"column":48}},"text":"()"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":30,"column":48},"end":{"row":30,"column":49}},"text":";"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":30,"column":12},"end":{"row":30,"column":50}},"text":"    if(req.params.id == null){next();}"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":33,"column":0},"end":{"row":33,"column":4}},"text":"    "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":33,"column":4},"end":{"row":33,"column":8}},"text":"    "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":33,"column":8},"end":{"row":33,"column":12}},"text":"    "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":33,"column":12},"end":{"row":33,"column":16}},"text":"    "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":33,"column":16},"end":{"row":33,"column":20}},"text":"    "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":33,"column":20},"end":{"row":33,"column":24}},"text":"    "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":33,"column":24},"end":{"row":33,"column":28}},"text":"    "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":33,"column":28},"end":{"row":33,"column":66}},"text":"    if(req.params.id == null){next();}"}]}],[{"group":"doc","deltas":[{"action":"removeLines","range":{"start":{"row":29,"column":0},"end":{"row":31,"column":0}},"nl":"\n","lines":["            ","            "]},{"action":"removeText","range":{"start":{"row":31,"column":0},"end":{"row":31,"column":66}},"text":"                                if(req.params.id == null){next();}"},{"action":"insertText","range":{"start":{"row":89,"column":0},"end":{"row":89,"column":12}},"text":"<<<<<<< HEAD"},{"action":"insertText","range":{"start":{"row":89,"column":12},"end":{"row":90,"column":0}},"text":"\n"},{"action":"insertLines","range":{"start":{"row":90,"column":0},"end":{"row":94,"column":0}},"lines":["            app.route('users/:user_id')","                .delete(function(req, res){","                    //TOOD","======="]},{"action":"insertText","range":{"start":{"row":95,"column":30},"end":{"row":95,"column":31}},"text":"_"},{"action":"insertText","range":{"start":{"row":99,"column":41},"end":{"row":99,"column":42}},"text":"_"},{"action":"insertText","range":{"start":{"row":117,"column":0},"end":{"row":117,"column":48}},"text":">>>>>>> 6bc27411231dc57b33cc0338775c929d2e5e8770"},{"action":"insertText","range":{"start":{"row":117,"column":48},"end":{"row":118,"column":0}},"text":"\n"},{"action":"insertText","range":{"start":{"row":119,"column":0},"end":{"row":120,"column":0}},"text":"\n"},{"action":"insertLines","range":{"start":{"row":120,"column":0},"end":{"row":121,"column":0}},"lines":[""]}]}]]},"ace":{"folds":[],"scrolltop":1320,"scrollleft":0,"selection":{"start":{"row":107,"column":42},"end":{"row":107,"column":42},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":93,"state":"no_regex","mode":"ace/mode/javascript"}},"timestamp":1415616559000,"hash":"f04221454f6d5a49ddc9ebb2149410859e45bce6"}
{"filter":false,"title":"astronautsController.js","tooltip":"/src/backend/controllers/astronautsController.js","undoManager":{"mark":12,"position":12,"stack":[[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":0,"column":0},"end":{"row":1,"column":0}},"text":"\n"},{"action":"insertLines","range":{"start":{"row":1,"column":0},"end":{"row":61,"column":0}},"lines":["","","var Astronaut = require('../../backend/service/astronauts');","","","module.exports = function(){","","    var that = this;","    that.debug = false;","    that.name = 'astronautsController';","","    return {","","        setDebug: function(flag){","            that.debug = flag;","        },","","        getName: function(){","            return that.name;","        },","","        run: function(app){","","            if(that.debug)","                console.log('debug: inside astronaut run function ');","","            app.route('/users')","","                //use mongoose to get all astronauts from database","                .get(function(req, res){","                    Astronaut.find(function(err, astronauts){","                        if(err)","                            res.send(err)","                        res.json(astronauts);   // return all astronauts in json format","                    });","                })","","                //create astronat and send back all astronauts from database","                .post(function(req, res){","                    Astronaut.create({","                        name: \"first astronaut\"","                    }, function(err, astronaut){","                        if(err)","                            res.send(err);","","                        Astronaut.find(function(err, astronauts){","                            if(err)","                                res.send(err)","                            res.json(astronauts);","                        });","                    });","                });","            app.routes('users/:user_id')","                .delete(function(req, res){","","                });","            return this;","        }//end of run function","    };",""]},{"action":"insertText","range":{"start":{"row":61,"column":0},"end":{"row":61,"column":2}},"text":"};"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":53,"column":21},"end":{"row":53,"column":22}},"text":"s"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":55,"column":0},"end":{"row":55,"column":4}},"text":"    "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":55,"column":4},"end":{"row":55,"column":8}},"text":"    "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":55,"column":8},"end":{"row":55,"column":12}},"text":"    "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":55,"column":12},"end":{"row":55,"column":16}},"text":"    "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":55,"column":16},"end":{"row":55,"column":20}},"text":"    "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":55,"column":20},"end":{"row":55,"column":21}},"text":"/"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":55,"column":21},"end":{"row":55,"column":22}},"text":"/"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":55,"column":22},"end":{"row":55,"column":23}},"text":"T"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":55,"column":23},"end":{"row":55,"column":24}},"text":"O"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":55,"column":24},"end":{"row":55,"column":25}},"text":"O"},{"action":"insertText","range":{"start":{"row":55,"column":25},"end":{"row":55,"column":26}},"text":"D"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":27,"column":0},"end":{"row":27,"column":124}},"text":"            //list all astrnonats in databse--------------------------------------------------------------------------------"},{"action":"insertText","range":{"start":{"row":27,"column":124},"end":{"row":28,"column":0}},"text":"\n"},{"action":"removeLines","range":{"start":{"row":29,"column":0},"end":{"row":30,"column":0}},"nl":"\n","lines":[""]},{"action":"insertText","range":{"start":{"row":31,"column":0},"end":{"row":32,"column":0}},"text":"\n"},{"action":"insertLines","range":{"start":{"row":32,"column":0},"end":{"row":33,"column":0}},"lines":[""]},{"action":"insertText","range":{"start":{"row":35,"column":41},"end":{"row":36,"column":0}},"text":"\n"},{"action":"insertLines","range":{"start":{"row":36,"column":0},"end":{"row":37,"column":0}},"lines":[""]},{"action":"insertText","range":{"start":{"row":37,"column":0},"end":{"row":37,"column":56}},"text":"                        console.log('found astronauts');"},{"action":"removeText","range":{"start":{"row":38,"column":28},"end":{"row":38,"column":32}},"text":"json"},{"action":"insertText","range":{"start":{"row":38,"column":28},"end":{"row":38,"column":47}},"text":"send(JSON.stringify"},{"action":"insertText","range":{"start":{"row":38,"column":59},"end":{"row":38,"column":60}},"text":")"},{"action":"removeText","range":{"start":{"row":42,"column":12},"end":{"row":42,"column":16}},"text":"    "},{"action":"removeText","range":{"start":{"row":43,"column":0},"end":{"row":43,"column":41}},"text":"                .post(function(req, res){"},{"action":"removeText","range":{"start":{"row":42,"column":72},"end":{"row":43,"column":0}},"text":"\n"},{"action":"insertText","range":{"start":{"row":42,"column":72},"end":{"row":42,"column":121}},"text":"-------------------------------------------------"},{"action":"insertText","range":{"start":{"row":42,"column":121},"end":{"row":43,"column":0}},"text":"\n"},{"action":"insertLines","range":{"start":{"row":43,"column":0},"end":{"row":47,"column":0}},"lines":["            //app.route('/users')","                .post(function(req, res){","                    var randLetter = String.fromCharCode(65 + Math.floor(Math.random() * 26));","                    var uniqid = randLetter + Date.now();"]},{"action":"insertText","range":{"start":{"row":49,"column":0},"end":{"row":50,"column":0}},"text":"\n"},{"action":"insertText","range":{"start":{"row":50,"column":24},"end":{"row":50,"column":25}},"text":"\""},{"action":"insertText","range":{"start":{"row":50,"column":29},"end":{"row":50,"column":30}},"text":"\""},{"action":"removeText","range":{"start":{"row":50,"column":33},"end":{"row":50,"column":49}},"text":"first astronaut\""},{"action":"insertText","range":{"start":{"row":50,"column":33},"end":{"row":50,"column":41}},"text":"John D\","},{"action":"insertText","range":{"start":{"row":50,"column":41},"end":{"row":51,"column":0}},"text":"\n"},{"action":"insertLines","range":{"start":{"row":51,"column":0},"end":{"row":65,"column":0}},"lines":["                        \"walkedOnMoon\": true,","                        \"_id\": uniqid,","                        \"__v\": 1,","                        \"lastupdated\": new Date(),","                        \"skills\": [","                            \"floatings\",","                            \"repairings satellites\"","                        ],","                        \"missions\": ['1']","","                    }, function(err, astronauts){","                        if(err)","                            //console.log(err)","                            res.send(err)"]},{"action":"insertText","range":{"start":{"row":65,"column":0},"end":{"row":65,"column":57}},"text":"                        console.log(\"created astronaut\");"},{"action":"removeText","range":{"start":{"row":66,"column":20},"end":{"row":66,"column":23}},"text":"}, "},{"action":"insertText","range":{"start":{"row":66,"column":20},"end":{"row":66,"column":39}},"text":"    Astronaut.find("},{"action":"insertText","range":{"start":{"row":66,"column":62},"end":{"row":66,"column":63}},"text":"s"},{"action":"insertText","range":{"start":{"row":67,"column":24},"end":{"row":67,"column":26}},"text":"  "},{"action":"insertText","range":{"start":{"row":67,"column":26},"end":{"row":67,"column":28}},"text":"  "},{"action":"insertText","range":{"start":{"row":68,"column":28},"end":{"row":68,"column":32}},"text":"    "},{"action":"insertText","range":{"start":{"row":68,"column":32},"end":{"row":68,"column":34}},"text":"//"},{"action":"removeText","range":{"start":{"row":68,"column":47},"end":{"row":68,"column":48}},"text":";"},{"action":"insertText","range":{"start":{"row":69,"column":0},"end":{"row":69,"column":65}},"text":"                            console.log('created new astronaut');"},{"action":"insertText","range":{"start":{"row":69,"column":65},"end":{"row":70,"column":0}},"text":"\n"},{"action":"insertLines","range":{"start":{"row":70,"column":0},"end":{"row":78,"column":0}},"lines":["                            res.send(JSON.stringify(astronauts));","                        });","                    });","                })","                .delete(function(req, res) {","                    Astronaut.collection.remove(function (err) {","                        if (err)","                            res.send(err)"]},{"action":"insertText","range":{"start":{"row":78,"column":0},"end":{"row":78,"column":69}},"text":"                        console.log('deleting astronaut collection');"},{"action":"removeText","range":{"start":{"row":80,"column":27},"end":{"row":80,"column":28}},"text":" "},{"action":"removeText","range":{"start":{"row":81,"column":0},"end":{"row":81,"column":1}},"text":" "},{"action":"insertText","range":{"start":{"row":81,"column":44},"end":{"row":82,"column":0}},"text":"\n"},{"action":"insertLines","range":{"start":{"row":82,"column":0},"end":{"row":83,"column":0}},"lines":[""]},{"action":"insertText","range":{"start":{"row":83,"column":0},"end":{"row":83,"column":62}},"text":"                            console.log(\"deleted astronauts\");"},{"action":"removeText","range":{"start":{"row":84,"column":32},"end":{"row":84,"column":36}},"text":"json"},{"action":"insertText","range":{"start":{"row":84,"column":32},"end":{"row":84,"column":51}},"text":"send(JSON.stringify"},{"action":"insertText","range":{"start":{"row":84,"column":63},"end":{"row":84,"column":64}},"text":")"},{"action":"insertText","range":{"start":{"row":87,"column":0},"end":{"row":88,"column":0}},"text":"\n"},{"action":"insertText","range":{"start":{"row":89,"column":0},"end":{"row":89,"column":12}},"text":"<<<<<<< HEAD"},{"action":"insertText","range":{"start":{"row":89,"column":12},"end":{"row":90,"column":0}},"text":"\n"},{"action":"removeText","range":{"start":{"row":93,"column":0},"end":{"row":93,"column":19}},"text":"                });"},{"action":"insertText","range":{"start":{"row":93,"column":0},"end":{"row":93,"column":7}},"text":"======="},{"action":"insertText","range":{"start":{"row":93,"column":7},"end":{"row":94,"column":0}},"text":"\n"},{"action":"insertLines","range":{"start":{"row":94,"column":0},"end":{"row":120,"column":0}},"lines":["            //delete astronaut from database-------------------------------------------------------------------------------","            app.route('users/:_id')","                .delete(function(req, res){","                    //todo","                    Astronaut.remove({","                        _id : req.params._id","                    }, function(err, astronaut){","                        if(err)","                            res.semd(err);","                        Astronaut.find(function(err,astronauts){","                            if(err)","                                res.send(err)","                            console.log('deleted astronaut');","                            res.send(JSON.stringify(astronauts));","                        });","                    });","                });","","            //application-------------------------------------------------------------------------------------------------","            app.route('*')","                .get(function(req,res){","                    //res.sendfile();","                    //todo",">>>>>>> 6bc27411231dc57b33cc0338775c929d2e5e8770","                });",""]}]}]]},"ace":{"folds":[],"scrolltop":643.2,"scrollleft":0,"selection":{"start":{"row":79,"column":22},"end":{"row":79,"column":22},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":43,"state":"no_regex","mode":"ace/mode/javascript"}},"timestamp":1415606154000,"hash":"0488dbe7c40d531a4ee3f0d7f724e1aa239bbe6a"}
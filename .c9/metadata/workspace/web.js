{"filter":false,"title":"web.js","tooltip":"/web.js","undoManager":{"mark":100,"position":100,"stack":[[{"start":{"row":264,"column":34},"end":{"row":264,"column":35},"action":"insert","lines":["m"],"id":106}],[{"start":{"row":264,"column":35},"end":{"row":264,"column":36},"action":"insert","lines":["e"],"id":107}],[{"start":{"row":264,"column":32},"end":{"row":264,"column":33},"action":"insert","lines":["a"],"id":108}],[{"start":{"row":264,"column":33},"end":{"row":264,"column":34},"action":"insert","lines":["p"],"id":109}],[{"start":{"row":264,"column":34},"end":{"row":264,"column":35},"action":"insert","lines":["i"],"id":110}],[{"start":{"row":264,"column":35},"end":{"row":264,"column":36},"action":"insert","lines":["/"],"id":111}],[{"start":{"row":265,"column":32},"end":{"row":265,"column":33},"action":"insert","lines":["a"],"id":112}],[{"start":{"row":265,"column":33},"end":{"row":265,"column":34},"action":"insert","lines":["p"],"id":113}],[{"start":{"row":265,"column":34},"end":{"row":265,"column":35},"action":"insert","lines":["i"],"id":114}],[{"start":{"row":265,"column":35},"end":{"row":265,"column":36},"action":"insert","lines":["/"],"id":115}],[{"start":{"row":265,"column":36},"end":{"row":265,"column":37},"action":"insert","lines":["l"],"id":116}],[{"start":{"row":265,"column":37},"end":{"row":265,"column":38},"action":"insert","lines":["o"],"id":117}],[{"start":{"row":265,"column":38},"end":{"row":265,"column":39},"action":"insert","lines":["g"],"id":118}],[{"start":{"row":265,"column":39},"end":{"row":265,"column":40},"action":"insert","lines":["i"],"id":119}],[{"start":{"row":265,"column":40},"end":{"row":265,"column":41},"action":"insert","lines":["n"],"id":120}],[{"start":{"row":175,"column":47},"end":{"row":176,"column":0},"action":"insert","lines":["",""],"id":150},{"start":{"row":176,"column":0},"end":{"row":176,"column":5},"action":"insert","lines":["     "]}],[{"start":{"row":176,"column":5},"end":{"row":177,"column":0},"action":"insert","lines":["",""],"id":151},{"start":{"row":177,"column":0},"end":{"row":177,"column":5},"action":"insert","lines":["     "]}],[{"start":{"row":177,"column":4},"end":{"row":177,"column":5},"action":"remove","lines":[" "],"id":152}],[{"start":{"row":177,"column":0},"end":{"row":177,"column":4},"action":"remove","lines":["    "],"id":153}],[{"start":{"row":177,"column":0},"end":{"row":177,"column":1},"action":"insert","lines":[" "],"id":154}],[{"start":{"row":177,"column":1},"end":{"row":177,"column":2},"action":"insert","lines":["r"],"id":155}],[{"start":{"row":177,"column":2},"end":{"row":177,"column":3},"action":"insert","lines":["o"],"id":156}],[{"start":{"row":177,"column":3},"end":{"row":177,"column":4},"action":"insert","lines":["u"],"id":157}],[{"start":{"row":177,"column":4},"end":{"row":177,"column":5},"action":"insert","lines":["t"],"id":158}],[{"start":{"row":177,"column":5},"end":{"row":177,"column":6},"action":"insert","lines":["e"],"id":159}],[{"start":{"row":177,"column":6},"end":{"row":177,"column":7},"action":"insert","lines":["."],"id":160}],[{"start":{"row":177,"column":7},"end":{"row":177,"column":8},"action":"insert","lines":["r"],"id":161}],[{"start":{"row":177,"column":7},"end":{"row":177,"column":8},"action":"remove","lines":["r"],"id":162}],[{"start":{"row":177,"column":6},"end":{"row":177,"column":7},"action":"remove","lines":["."],"id":163}],[{"start":{"row":177,"column":6},"end":{"row":177,"column":7},"action":"insert","lines":["r"],"id":164}],[{"start":{"row":177,"column":7},"end":{"row":177,"column":8},"action":"insert","lines":["."],"id":165}],[{"start":{"row":177,"column":8},"end":{"row":177,"column":9},"action":"insert","lines":["r"],"id":166}],[{"start":{"row":177,"column":9},"end":{"row":177,"column":10},"action":"insert","lines":["o"],"id":167}],[{"start":{"row":177,"column":10},"end":{"row":177,"column":11},"action":"insert","lines":["u"],"id":168}],[{"start":{"row":177,"column":11},"end":{"row":177,"column":12},"action":"insert","lines":["t"],"id":169}],[{"start":{"row":177,"column":12},"end":{"row":177,"column":13},"action":"insert","lines":["e"],"id":170}],[{"start":{"row":177,"column":13},"end":{"row":177,"column":14},"action":"insert","lines":[")"],"id":171}],[{"start":{"row":177,"column":13},"end":{"row":177,"column":14},"action":"remove","lines":[")"],"id":172}],[{"start":{"row":177,"column":13},"end":{"row":177,"column":15},"action":"insert","lines":["()"],"id":173}],[{"start":{"row":177,"column":14},"end":{"row":177,"column":16},"action":"insert","lines":["''"],"id":174}],[{"start":{"row":177,"column":15},"end":{"row":177,"column":16},"action":"insert","lines":["/"],"id":175}],[{"start":{"row":177,"column":16},"end":{"row":177,"column":17},"action":"insert","lines":["l"],"id":176}],[{"start":{"row":177,"column":17},"end":{"row":177,"column":18},"action":"insert","lines":["o"],"id":177}],[{"start":{"row":177,"column":18},"end":{"row":177,"column":19},"action":"insert","lines":["g"],"id":178}],[{"start":{"row":177,"column":19},"end":{"row":177,"column":20},"action":"insert","lines":["i"],"id":179}],[{"start":{"row":177,"column":20},"end":{"row":177,"column":21},"action":"insert","lines":["n"],"id":180}],[{"start":{"row":177,"column":23},"end":{"row":178,"column":0},"action":"insert","lines":["",""],"id":181},{"start":{"row":178,"column":0},"end":{"row":178,"column":1},"action":"insert","lines":[" "]}],[{"start":{"row":178,"column":1},"end":{"row":178,"column":4},"action":"insert","lines":["   "],"id":182}],[{"start":{"row":178,"column":4},"end":{"row":178,"column":5},"action":"insert","lines":["."],"id":183}],[{"start":{"row":178,"column":5},"end":{"row":178,"column":6},"action":"insert","lines":["g"],"id":184}],[{"start":{"row":178,"column":6},"end":{"row":178,"column":7},"action":"insert","lines":["e"],"id":185}],[{"start":{"row":178,"column":7},"end":{"row":178,"column":8},"action":"insert","lines":["t"],"id":186}],[{"start":{"row":178,"column":8},"end":{"row":178,"column":10},"action":"insert","lines":["()"],"id":187}],[{"start":{"row":178,"column":9},"end":{"row":178,"column":10},"action":"insert","lines":["e"],"id":188}],[{"start":{"row":178,"column":10},"end":{"row":178,"column":11},"action":"insert","lines":["n"],"id":189}],[{"start":{"row":178,"column":11},"end":{"row":178,"column":12},"action":"insert","lines":["s"],"id":190}],[{"start":{"row":178,"column":12},"end":{"row":178,"column":13},"action":"insert","lines":["u"],"id":191}],[{"start":{"row":178,"column":12},"end":{"row":178,"column":13},"action":"remove","lines":["u"],"id":192}],[{"start":{"row":178,"column":11},"end":{"row":178,"column":12},"action":"remove","lines":["s"],"id":193}],[{"start":{"row":178,"column":10},"end":{"row":178,"column":11},"action":"remove","lines":["n"],"id":194}],[{"start":{"row":178,"column":9},"end":{"row":178,"column":10},"action":"remove","lines":["e"],"id":195}],[{"start":{"row":178,"column":9},"end":{"row":178,"column":10},"action":"insert","lines":["r"],"id":196}],[{"start":{"row":178,"column":10},"end":{"row":178,"column":11},"action":"insert","lines":["o"],"id":197}],[{"start":{"row":178,"column":11},"end":{"row":178,"column":12},"action":"insert","lines":["u"],"id":198}],[{"start":{"row":178,"column":12},"end":{"row":178,"column":13},"action":"insert","lines":["t"],"id":199}],[{"start":{"row":178,"column":13},"end":{"row":178,"column":14},"action":"insert","lines":["e"],"id":200}],[{"start":{"row":178,"column":14},"end":{"row":178,"column":15},"action":"insert","lines":["s"],"id":201}],[{"start":{"row":178,"column":15},"end":{"row":178,"column":16},"action":"insert","lines":["."],"id":202}],[{"start":{"row":178,"column":16},"end":{"row":178,"column":17},"action":"insert","lines":["l"],"id":203}],[{"start":{"row":178,"column":17},"end":{"row":178,"column":18},"action":"insert","lines":["o"],"id":204}],[{"start":{"row":178,"column":16},"end":{"row":178,"column":18},"action":"remove","lines":["lo"],"id":205},{"start":{"row":178,"column":16},"end":{"row":178,"column":21},"action":"insert","lines":["login"]}],[{"start":{"row":178,"column":22},"end":{"row":178,"column":23},"action":"insert","lines":[";"],"id":206}],[{"start":{"row":165,"column":0},"end":{"row":165,"column":3},"action":"insert","lines":["// "],"id":207}],[{"start":{"row":166,"column":4},"end":{"row":166,"column":7},"action":"insert","lines":["// "],"id":208}],[{"start":{"row":165,"column":0},"end":{"row":165,"column":3},"action":"remove","lines":["// "],"id":209}],[{"start":{"row":166,"column":4},"end":{"row":166,"column":7},"action":"remove","lines":["// "],"id":210}],[{"start":{"row":177,"column":0},"end":{"row":177,"column":3},"action":"insert","lines":["// "],"id":211}],[{"start":{"row":178,"column":4},"end":{"row":178,"column":7},"action":"insert","lines":["// "],"id":212}],[{"start":{"row":177,"column":0},"end":{"row":178,"column":0},"action":"remove","lines":["//  router.route('/login')",""],"id":213}],[{"start":{"row":177,"column":0},"end":{"row":178,"column":0},"action":"remove","lines":["    // .get(routes.login);",""],"id":214}],[{"start":{"row":197,"column":0},"end":{"row":197,"column":3},"action":"insert","lines":["// "],"id":215}],[{"start":{"row":198,"column":4},"end":{"row":198,"column":7},"action":"insert","lines":["// "],"id":216}],[{"start":{"row":199,"column":4},"end":{"row":199,"column":7},"action":"insert","lines":["// "],"id":217}],[{"start":{"row":200,"column":8},"end":{"row":200,"column":11},"action":"insert","lines":["// "],"id":218}],[{"start":{"row":201,"column":8},"end":{"row":201,"column":11},"action":"insert","lines":["// "],"id":219}],[{"start":{"row":201,"column":8},"end":{"row":201,"column":11},"action":"remove","lines":["// "],"id":220}],[{"start":{"row":200,"column":8},"end":{"row":200,"column":11},"action":"remove","lines":["// "],"id":221}],[{"start":{"row":199,"column":4},"end":{"row":199,"column":7},"action":"remove","lines":["// "],"id":222}],[{"start":{"row":198,"column":4},"end":{"row":198,"column":7},"action":"remove","lines":["// "],"id":223}],[{"start":{"row":197,"column":0},"end":{"row":197,"column":3},"action":"remove","lines":["// "],"id":224}],[{"start":{"row":200,"column":35},"end":{"row":200,"column":36},"action":"remove","lines":["x"],"id":225}],[{"start":{"row":200,"column":34},"end":{"row":200,"column":35},"action":"remove","lines":["e"],"id":226}],[{"start":{"row":200,"column":33},"end":{"row":200,"column":34},"action":"remove","lines":["d"],"id":227}],[{"start":{"row":200,"column":32},"end":{"row":200,"column":33},"action":"remove","lines":["n"],"id":228}],[{"start":{"row":200,"column":31},"end":{"row":200,"column":32},"action":"remove","lines":["i"],"id":229}],[{"start":{"row":200,"column":31},"end":{"row":200,"column":32},"action":"insert","lines":["h"],"id":230}],[{"start":{"row":200,"column":32},"end":{"row":200,"column":33},"action":"insert","lines":["o"],"id":231}],[{"start":{"row":200,"column":33},"end":{"row":200,"column":34},"action":"insert","lines":["m"],"id":232}],[{"start":{"row":200,"column":34},"end":{"row":200,"column":35},"action":"insert","lines":["e"],"id":233}],[{"start":{"row":51,"column":15},"end":{"row":51,"column":16},"action":"insert","lines":[" "],"id":234,"ignore":true},{"start":{"row":52,"column":0},"end":{"row":52,"column":3},"action":"remove","lines":["// "]},{"start":{"row":89,"column":0},"end":{"row":98,"column":0},"action":"remove","lines":["        socket.on('arduino:send', function(data) {","            console.log(data);","            socket.broadcast.emit('client:send', {msg: 'data for client from arduino controller'})","        })","        socket.on('arduino:send2', function(data) {","            socket.broadcast.emit('client:send2', {msg: 'another data for client from arduino controller'})","            console.log(data);","        })","        ",""]},{"start":{"row":149,"column":3},"end":{"row":156,"column":0},"action":"remove","lines":["middleware to use for all requests","router.use(function(req, res, next) {","    // do logging","    console.log('Something is happening.');","    next(); // make sure we go to the next routes and don't stop here","});","",""]},{"start":{"row":150,"column":3},"end":{"row":150,"column":6},"action":"insert","lines":[" //"]},{"start":{"row":154,"column":0},"end":{"row":154,"column":3},"action":"insert","lines":["// "]},{"start":{"row":155,"column":0},"end":{"row":155,"column":2},"action":"insert","lines":["//"]},{"start":{"row":156,"column":0},"end":{"row":156,"column":2},"action":"insert","lines":["//"]},{"start":{"row":158,"column":0},"end":{"row":158,"column":2},"action":"insert","lines":["//"]},{"start":{"row":159,"column":0},"end":{"row":159,"column":2},"action":"insert","lines":["//"]},{"start":{"row":160,"column":0},"end":{"row":162,"column":0},"action":"remove","lines":["     ","",""]},{"start":{"row":160,"column":0},"end":{"row":161,"column":2},"action":"insert","lines":["","//"]},{"start":{"row":162,"column":0},"end":{"row":162,"column":2},"action":"insert","lines":["//"]},{"start":{"row":164,"column":0},"end":{"row":164,"column":2},"action":"insert","lines":["//"]},{"start":{"row":165,"column":0},"end":{"row":165,"column":2},"action":"insert","lines":["//"]},{"start":{"row":166,"column":0},"end":{"row":166,"column":2},"action":"insert","lines":["//"]},{"start":{"row":167,"column":0},"end":{"row":167,"column":2},"action":"insert","lines":["//"]},{"start":{"row":168,"column":0},"end":{"row":168,"column":2},"action":"insert","lines":["//"]},{"start":{"row":169,"column":0},"end":{"row":169,"column":2},"action":"insert","lines":["//"]},{"start":{"row":170,"column":0},"end":{"row":170,"column":2},"action":"insert","lines":["//"]},{"start":{"row":171,"column":0},"end":{"row":171,"column":2},"action":"insert","lines":["//"]},{"start":{"row":171,"column":6},"end":{"row":178,"column":28},"action":"remove","lines":["","","","router.route('/login')","    .get(routes.login);","    ","router.route('/signup')","    .get(routes.signup);    "]},{"start":{"row":176,"column":31},"end":{"row":176,"column":35},"action":"remove","lines":["home"]},{"start":{"row":176,"column":31},"end":{"row":176,"column":36},"action":"insert","lines":["index"]},{"start":{"row":178,"column":4},"end":{"row":178,"column":8},"action":"insert","lines":["    "]},{"start":{"row":182,"column":0},"end":{"row":182,"column":1},"action":"remove","lines":[" "]},{"start":{"row":182,"column":0},"end":{"row":182,"column":2},"action":"insert","lines":["//"]},{"start":{"row":182,"column":5},"end":{"row":182,"column":7},"action":"remove","lines":["//"]},{"start":{"row":183,"column":0},"end":{"row":183,"column":1},"action":"remove","lines":[" "]},{"start":{"row":183,"column":0},"end":{"row":183,"column":2},"action":"insert","lines":["//"]},{"start":{"row":183,"column":9},"end":{"row":183,"column":11},"action":"remove","lines":["//"]},{"start":{"row":183,"column":31},"end":{"row":183,"column":38},"action":"remove","lines":["arduino"]},{"start":{"row":183,"column":31},"end":{"row":183,"column":36},"action":"insert","lines":["index"]},{"start":{"row":184,"column":0},"end":{"row":184,"column":1},"action":"remove","lines":[" "]},{"start":{"row":184,"column":0},"end":{"row":184,"column":2},"action":"insert","lines":["//"]},{"start":{"row":184,"column":9},"end":{"row":184,"column":11},"action":"remove","lines":["//"]},{"start":{"row":185,"column":0},"end":{"row":185,"column":1},"action":"remove","lines":[" "]},{"start":{"row":185,"column":0},"end":{"row":185,"column":2},"action":"insert","lines":["//"]},{"start":{"row":185,"column":9},"end":{"row":185,"column":11},"action":"remove","lines":["//"]},{"start":{"row":186,"column":0},"end":{"row":186,"column":1},"action":"remove","lines":[" "]},{"start":{"row":186,"column":0},"end":{"row":186,"column":2},"action":"insert","lines":["//"]},{"start":{"row":186,"column":5},"end":{"row":186,"column":7},"action":"remove","lines":["//"]},{"start":{"row":189,"column":0},"end":{"row":189,"column":3},"action":"insert","lines":["// "]},{"start":{"row":190,"column":3},"end":{"row":190,"column":6},"action":"insert","lines":[" //"]},{"start":{"row":196,"column":0},"end":{"row":196,"column":3},"action":"insert","lines":["// "]},{"start":{"row":197,"column":0},"end":{"row":197,"column":3},"action":"insert","lines":["// "]},{"start":{"row":198,"column":0},"end":{"row":198,"column":3},"action":"insert","lines":["// "]},{"start":{"row":201,"column":0},"end":{"row":201,"column":3},"action":"insert","lines":["// "]},{"start":{"row":202,"column":0},"end":{"row":202,"column":2},"action":"insert","lines":["//"]},{"start":{"row":202,"column":4},"end":{"row":202,"column":5},"action":"insert","lines":[" "]},{"start":{"row":203,"column":0},"end":{"row":203,"column":3},"action":"insert","lines":["// "]},{"start":{"row":204,"column":0},"end":{"row":204,"column":3},"action":"insert","lines":["// "]},{"start":{"row":231,"column":3},"end":{"row":238,"column":61},"action":"remove","lines":["=====================================","// TWITTER ROUTES ======================","// =====================================","// route for twitter authentication and login","router.route('/auth/twitter')","    .get(passport.authenticate('twitter'));","","// handle the callback after twitter has authenticated the us"]},{"start":{"row":231,"column":3},"end":{"row":240,"column":9},"action":"insert","lines":["// Register all our routes with /api","","","// app.use(function(req, res, next){","//   // the status option, or res.statusCode = 404","//   // are equivalent, however with the option we","//   // get the \"status\" local available as well","//   res.render('404', {","//       status: err.status || 404","//     , "]},{"start":{"row":240,"column":11},"end":{"row":241,"column":0},"action":"remove","lines":["",""]},{"start":{"row":240,"column":13},"end":{"row":244,"column":1},"action":"remove","lines":["uter.route('/auth/twitter/callback')","    .get(passport.authenticate('twitter', {","            successRedirect : '/api/home',","            failureRedirect : '/api/login'"," "]},{"start":{"row":240,"column":13},"end":{"row":251,"column":2},"action":"insert","lines":["r: err","//   });","// });","","// app.use(function(err, req, res, next){","//   // we may use properties of the error object","//   // here and next(err) appropriately, or if","//   // we possibly recovered from the error, simply next().","//   res.render('500', {","//       status: err.status || 500","//     , error: err","//"]},{"start":{"row":251,"column":7},"end":{"row":251,"column":8},"action":"remove","lines":[")"]},{"start":{"row":252,"column":0},"end":{"row":254,"column":0},"action":"remove","lines":["    ","",""]},{"start":{"row":252,"column":0},"end":{"row":253,"column":24},"action":"insert","lines":["// });    ","app.use('/api', router);"]},{"start":{"row":257,"column":9},"end":{"row":257,"column":29},"action":"insert","lines":["ensureAuthenticated,"]},{"start":{"row":262,"column":0},"end":{"row":293,"column":0},"action":"remove","lines":["","app.use('/api', router);","","","    app.use(function(req, res, next){","  res.status(404);","  ","  // respond with html page","  if (req.accepts('html')) {","    // res.render('login', { url: req.url });","     res.redirect('/api/login');","    return;","  }","","  // respond with json","  if (req.accepts('json')) {","    res.send({ error: 'Not found' });","    return;","  }","","  // default to plain-text. send()","  res.type('txt').send('Not found');","}); ","","app.use(function(err, req, res, next){","  // we may use properties of the error object","  // here and next(err) appropriately, or if","  // we possibly recovered from the error, simply next().","  res.status(err.status || 500);","  res.render('500', { error: err });","});",""]},{"start":{"row":262,"column":0},"end":{"row":262,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":51,"column":15},"end":{"row":51,"column":16},"action":"remove","lines":[" "],"id":235,"ignore":true},{"start":{"row":52,"column":0},"end":{"row":52,"column":3},"action":"insert","lines":["// "]},{"start":{"row":89,"column":0},"end":{"row":98,"column":0},"action":"insert","lines":["        socket.on('arduino:send', function(data) {","            console.log(data);","            socket.broadcast.emit('client:send', {msg: 'data for client from arduino controller'})","        })","        socket.on('arduino:send2', function(data) {","            socket.broadcast.emit('client:send2', {msg: 'another data for client from arduino controller'})","            console.log(data);","        })","        ",""]},{"start":{"row":158,"column":3},"end":{"row":165,"column":0},"action":"insert","lines":["middleware to use for all requests","router.use(function(req, res, next) {","    // do logging","    console.log('Something is happening.');","    next(); // make sure we go to the next routes and don't stop here","});","",""]},{"start":{"row":166,"column":3},"end":{"row":166,"column":6},"action":"remove","lines":[" //"]},{"start":{"row":170,"column":0},"end":{"row":170,"column":3},"action":"remove","lines":["// "]},{"start":{"row":171,"column":0},"end":{"row":171,"column":2},"action":"remove","lines":["//"]},{"start":{"row":172,"column":0},"end":{"row":172,"column":2},"action":"remove","lines":["//"]},{"start":{"row":174,"column":0},"end":{"row":174,"column":2},"action":"remove","lines":["//"]},{"start":{"row":175,"column":0},"end":{"row":175,"column":2},"action":"remove","lines":["//"]},{"start":{"row":176,"column":0},"end":{"row":177,"column":2},"action":"remove","lines":["","//"]},{"start":{"row":176,"column":0},"end":{"row":178,"column":0},"action":"insert","lines":["     ","",""]},{"start":{"row":179,"column":0},"end":{"row":179,"column":2},"action":"remove","lines":["//"]},{"start":{"row":181,"column":0},"end":{"row":181,"column":2},"action":"remove","lines":["//"]},{"start":{"row":182,"column":0},"end":{"row":182,"column":2},"action":"remove","lines":["//"]},{"start":{"row":183,"column":0},"end":{"row":183,"column":2},"action":"remove","lines":["//"]},{"start":{"row":184,"column":0},"end":{"row":184,"column":2},"action":"remove","lines":["//"]},{"start":{"row":185,"column":0},"end":{"row":185,"column":2},"action":"remove","lines":["//"]},{"start":{"row":186,"column":0},"end":{"row":186,"column":2},"action":"remove","lines":["//"]},{"start":{"row":187,"column":0},"end":{"row":187,"column":2},"action":"remove","lines":["//"]},{"start":{"row":188,"column":0},"end":{"row":188,"column":2},"action":"remove","lines":["//"]},{"start":{"row":188,"column":4},"end":{"row":195,"column":28},"action":"insert","lines":["","","","router.route('/login')","    .get(routes.login);","    ","router.route('/signup')","    .get(routes.signup);    "]},{"start":{"row":200,"column":31},"end":{"row":200,"column":36},"action":"remove","lines":["index"]},{"start":{"row":200,"column":31},"end":{"row":200,"column":35},"action":"insert","lines":["home"]},{"start":{"row":202,"column":4},"end":{"row":202,"column":8},"action":"remove","lines":["    "]},{"start":{"row":206,"column":0},"end":{"row":206,"column":2},"action":"remove","lines":["//"]},{"start":{"row":206,"column":0},"end":{"row":206,"column":1},"action":"insert","lines":[" "]},{"start":{"row":206,"column":4},"end":{"row":206,"column":6},"action":"insert","lines":["//"]},{"start":{"row":207,"column":0},"end":{"row":207,"column":2},"action":"remove","lines":["//"]},{"start":{"row":207,"column":0},"end":{"row":207,"column":1},"action":"insert","lines":[" "]},{"start":{"row":207,"column":8},"end":{"row":207,"column":10},"action":"insert","lines":["//"]},{"start":{"row":207,"column":32},"end":{"row":207,"column":37},"action":"remove","lines":["index"]},{"start":{"row":207,"column":32},"end":{"row":207,"column":39},"action":"insert","lines":["arduino"]},{"start":{"row":208,"column":0},"end":{"row":208,"column":2},"action":"remove","lines":["//"]},{"start":{"row":208,"column":0},"end":{"row":208,"column":1},"action":"insert","lines":[" "]},{"start":{"row":208,"column":8},"end":{"row":208,"column":10},"action":"insert","lines":["//"]},{"start":{"row":209,"column":0},"end":{"row":209,"column":2},"action":"remove","lines":["//"]},{"start":{"row":209,"column":0},"end":{"row":209,"column":1},"action":"insert","lines":[" "]},{"start":{"row":209,"column":8},"end":{"row":209,"column":10},"action":"insert","lines":["//"]},{"start":{"row":210,"column":0},"end":{"row":210,"column":2},"action":"remove","lines":["//"]},{"start":{"row":210,"column":3},"end":{"row":210,"column":6},"action":"insert","lines":[" //"]},{"start":{"row":213,"column":0},"end":{"row":213,"column":3},"action":"remove","lines":["// "]},{"start":{"row":214,"column":3},"end":{"row":214,"column":6},"action":"remove","lines":[" //"]},{"start":{"row":220,"column":0},"end":{"row":220,"column":3},"action":"remove","lines":["// "]},{"start":{"row":221,"column":0},"end":{"row":221,"column":3},"action":"remove","lines":["// "]},{"start":{"row":222,"column":0},"end":{"row":222,"column":3},"action":"remove","lines":["// "]},{"start":{"row":225,"column":0},"end":{"row":225,"column":3},"action":"remove","lines":["// "]},{"start":{"row":226,"column":0},"end":{"row":226,"column":2},"action":"remove","lines":["//"]},{"start":{"row":226,"column":2},"end":{"row":226,"column":3},"action":"remove","lines":[" "]},{"start":{"row":227,"column":0},"end":{"row":227,"column":3},"action":"remove","lines":["// "]},{"start":{"row":228,"column":0},"end":{"row":228,"column":3},"action":"remove","lines":["// "]},{"start":{"row":255,"column":3},"end":{"row":264,"column":9},"action":"remove","lines":["// Register all our routes with /api","","","// app.use(function(req, res, next){","//   // the status option, or res.statusCode = 404","//   // are equivalent, however with the option we","//   // get the \"status\" local available as well","//   res.render('404', {","//       status: err.status || 404","//     , "]},{"start":{"row":255,"column":3},"end":{"row":262,"column":61},"action":"insert","lines":["=====================================","// TWITTER ROUTES ======================","// =====================================","// route for twitter authentication and login","router.route('/auth/twitter')","    .get(passport.authenticate('twitter'));","","// handle the callback after twitter has authenticated the us"]},{"start":{"row":262,"column":63},"end":{"row":263,"column":0},"action":"insert","lines":["",""]},{"start":{"row":263,"column":2},"end":{"row":276,"column":24},"action":"remove","lines":["r: err","//   });","// });","","// app.use(function(err, req, res, next){","//   // we may use properties of the error object","//   // here and next(err) appropriately, or if","//   // we possibly recovered from the error, simply next().","//   res.render('500', {","//       status: err.status || 500","//     , error: err","//   });","// });    ","app.use('/api', router);"]},{"start":{"row":263,"column":2},"end":{"row":270,"column":0},"action":"insert","lines":["uter.route('/auth/twitter/callback')","    .get(passport.authenticate('twitter', {","            successRedirect : '/api/home',","            failureRedirect : '/api/login'","    }));","    ","",""]},{"start":{"row":274,"column":9},"end":{"row":274,"column":29},"action":"remove","lines":["ensureAuthenticated,"]},{"start":{"row":279,"column":0},"end":{"row":279,"column":4},"action":"remove","lines":["    "]},{"start":{"row":279,"column":0},"end":{"row":310,"column":0},"action":"insert","lines":["","app.use('/api', router);","","","    app.use(function(req, res, next){","  res.status(404);","  ","  // respond with html page","  if (req.accepts('html')) {","    // res.render('login', { url: req.url });","     res.redirect('/api/login');","    return;","  }","","  // respond with json","  if (req.accepts('json')) {","    res.send({ error: 'Not found' });","    return;","  }","","  // default to plain-text. send()","  res.type('txt').send('Not found');","}); ","","app.use(function(err, req, res, next){","  // we may use properties of the error object","  // here and next(err) appropriately, or if","  // we possibly recovered from the error, simply next().","  res.status(err.status || 500);","  res.render('500', { error: err });","});",""]}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":200,"column":31},"end":{"row":200,"column":31},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1439564325564,"hash":"e7deafaa34cc75f8f130edcb8d00788cf7f20642"}